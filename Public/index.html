<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" />
 <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class='container'>
    <div class="header">
        <h2>REGISTRATION FORM</h2>
    </div>
    <form class="form" id="form">
    <div class="form-control">
        <label>Username</label>
        <input type="text" name="" id="username" placeholder="Enter your name"
        autocomplete="off">
    <i class="fas fa-check"></i> 
    <i class="fas fa-exclamation"></i>  
    <small>ErrorMsg</small>
    </div>
    <div class="form-control">
        <label>Email</label>
        <input type="email" name="" id="email" placeholder="Enter your email">
    <i class="fas fa-check"></i> 
    <i class="fas fa-exclamation"></i>  
    <small>ErrorMsg</small>
    </div>
    <div class="form-control">
        <label>Phone Number</label>
        <input type="number" name="" id="phone" placeholder="Enter your number">
    <i class="fas fa-check"></i> 
    <i class="fas fa-exclamation"></i>  
    <small>ErrorMsg</small>
    </div>
    <div class="form-control">
        <label>Password</label>
        <input type="password" name="" id="password" placeholder="Enter your password">
    <i class="fas fa-check"></i> 
    <i class="fas fa-exclamation"></i>  
    <small>ErrorMsg</small>
    </div>
    <div class="form-control">
        <label>Confirm password</label>
        <input type="password" name="" id="cpassword" placeholder="Enter your password again">
    <i class="fas fa-check"></i> 
    <i class="fas fa-exclamation"></i>  
    <small>ErrorMsg</small>
    </div>
    <input type="submit" value="submit" class="btn" name="">
</form>
</div>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script type="text/javascript">
const form=document.getElementById('form');
const username=document.getElementById('username');
const email=document.getElementById('email');
const phone=document.getElementById('phone');
const password=document.getElementById('password');
const cpassword=document.getElementById('cpassword');
//add event
form.addEventListener('submit',(event)=>{
    event.preventDefault();
    validate();
})
const sendData=(sRate,count)=>{
if(sRate===count){
    alert('Registration Successfull');
    //sweet alert just a message show
    swal("Good job!", "Registration successfull", "success"); 
    // location.href="login.html";
}
}
//for final data validation
const successMsg=()=>{
let formCon=document.getElementsByClassName('form-control');
var count=formCon.lenght -1;
for(var i= 0;i< formCon.length; i++) {
   if( formCon[i].className==="form-control success"){
       var sRate= 0+i;
       sendData(sRate,count);
   }else{
       return false;
   }
}
}
 //more email validation
const isEmail=(emailVal)=>{
  var atSymbol=emailVal.indexOf("@");
  if(atSymbol<1)return false;
  var dot=emailVal.lastIndexOf('.');
  if(dot<= atSymbol+2)return false;
  if(dot===emailVal.lenght -1)return false;
  return true;
}
//define the validate function
const validate=()=>{
    const usernameVal = username.value.trim();
    const emailVal =  email.value.trim();
    const phoneVal = phone.value.trim();
    const passwordVal = password.value.trim();
    const cpasswordVal = cpassword.value.trim();
//validate username
if(usernameVal===""){
    setErrorMsg(username, 'username cannot be blank');
}else if (usernameVal.lenght <=2) {
    setErrorMsg(username, 'username min 3 char');
    
} else {
    setSuccessMsg(username);
}
//validate email
if(emailVal===""){
    setErrorMsg(email, 'email cannot be blank');
}else if ( !isEmail(emailVal)) {
    setErrorMsg(email, 'Not a valid email');  
} else {
    setSuccessMsg(email);
}
//validate phone
if(phoneVal===""){
    setErrorMsg(phone, 'phone cannot be blank');
}else if ( phoneVal.lenght >= 10) {
    setErrorMsg(phone, 'Not a valid number');  
} else {
    setSuccessMsg(phone);
}
//password
if(passwordVal===""){
    setErrorMsg(password, 'password cannot be blank');
}else if ( passwordVal.length <=5) {
    setErrorMsg(password, 'Not a valid password');  
} else {
    setSuccessMsg(password);
}
//confirm password
if(cpasswordVal===""){
    setErrorMsg(cpassword, 'password cannot be blank');
}else if ( passwordVal != cpasswordVal) {
    setErrorMsg(cpassword, 'Not a valid password or nat match');  
} else {
    setSuccessMsg(cpassword);
}
//next page
 successMsg();
}
function setErrorMsg(input, errormsgs){
  const formControl= input.parentElement;
  const small=formControl.querySelector('small');
     //const small=formCon.querySelector('small');
  formControl.className="form-control error";
  small.innerText=errormsgs; 
}
function setSuccessMsg(input){
    const formControl=input.parentElement;
    formControl.className="form-control success";
}

</script>
   
</body>
</html> 